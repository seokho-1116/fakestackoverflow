steps:
  - name: gradle:8-jdk21
    entrypoint: gradle
    args: ["test"]
  - name: gradle:8-jdk21
    entrypoint: gradle
    args: ["assemble"]
  - name: gcr.io/cloud-builders/docker
    args: ["build", "-t", "$LOCATION-docker.pkg.dev/$PROJECT_ID/$REPO_NAME/hello-spring", "--build-arg=JAR_FILE=build/libs/hellospring-1.0.0.jar", "."]

options:
  logging: CLOUD_LOGGING_ONLY
  pool:
    name: 'projects/$PROJECT_ID/locations/$LOCATION/workerPools/workerpool'

images: ["$LOCATION-docker.pkg.dev/$PROJECT_ID/$REPO_NAME/hello-spring"]